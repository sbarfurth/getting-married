syntax = "proto3";

package guest.v1;

import "guest/v1/guest.proto";
import "google/protobuf/empty.proto";

option go_package = "getting-married/gen/guest/v1;guestv1";

service GuestService {
  rpc GetParty(GetPartyRequest) returns (GetPartyResponse) {}
  rpc UpdatePartyContactInfo(UpdatePartyContactInfoRequest)
      returns (UpdatePartyContactInfoResponse) {}
  rpc UpdatePartyRsvpResponse(UpdatePartyRsvpResponseRequest)
      returns (UpdatePartyRsvpResponseResponse) {}
  rpc UpdateGuestRsvp(UpdateGuestRsvpRequest)
      returns (UpdateGuestRsvpResponse) {}
  rpc AddGuest(AddGuestRequest) returns (AddGuestResponse) {}
  rpc RemoveGuest(RemoveGuestRequest) returns (RemoveGuestResponse) {}

  // Admin only APIs.
  rpc ListParties(ListPartiesRequest) returns (ListPartiesResponse) {}
  rpc CreateParty(CreatePartyRequest) returns (CreatePartyResponse) {}
  rpc UpdateParty(UpdatePartyRequest) returns (UpdatePartyResponse) {}
  rpc DeleteParty(DeletePartyRequest) returns (google.protobuf.Empty) {}
}

message GetPartyRequest {
  string name = 1;
}
message GetPartyResponse {
  Party party = 1;
}

message UpdatePartyContactInfoRequest {
  string name = 1;
  Party.Address address = 2;
  Party.Contact contact = 3;
}
message UpdatePartyContactInfoResponse {
  Party party = 1;
}

message UpdatePartyRsvpResponseRequest {
  string name = 1;
  RSVP.Response response = 2;
}
message UpdatePartyRsvpResponseResponse {
  Party party = 1;
}

message UpdateGuestRsvpRequest {
  string name = 1;
  int32 index = 2;
  RSVP rsvp = 3;
}
message UpdateGuestRsvpResponse {
  Party party = 1;
}

message AddGuestRequest {
  string name = 1;
  Guest guest = 2;
}
message AddGuestResponse {
  Party party = 1;
}

message RemoveGuestRequest {
  string name = 1;
  int32 index = 2;
}
message RemoveGuestResponse {
  Party party = 1;
}

// Admin APIs.
message ListPartiesRequest {}
message ListPartiesResponse {
  repeated Party parties = 1;
}

message CreatePartyRequest {
  Party party = 1;
}
message CreatePartyResponse {
  Party party = 1;
}

message UpdatePartyRequest {
  Party party = 1;
}
message UpdatePartyResponse {
  Party party = 1;
}

message DeletePartyRequest {
  string name = 1;
}
